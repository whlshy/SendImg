import{j as e,b as ue,r as j}from"./react-DXRKQaLJ.js";import{a as xe}from"./react-dom-C_Nl2RMt.js";import{c as O}from"./zustand-BtmBK-cH.js";import{B as $,S as pe,a as he,b as fe,P as ge,T as S,L as J,c as z,d as _,e as I,I as T,C as je,f as Q,E as be,H as De,g as ye,D as we,h as L,u as R,i as q,j as ee,k as ne,l as ve,m as te,s as Ne,n as Ce}from"./@mui-i85AXBGb.js";import{u as se,B as Ee}from"./react-router-dom-CnjclEnD.js";import{a as F,b as oe,c as A,d as re,u as Se}from"./react-router-DQGAB0dC.js";import{Q as Ie}from"./react-qr-code-AAIp8ll6.js";import{$ as K}from"./peerjs-DxFR7Coi.js";import{u as M,a as le,b as Ae}from"./jotai-cgJx3t6v.js";import{v as ie}from"./uuid-C6aID195.js";import{Q as Le,M as $e,a as Oe,b as Pe}from"./@tanstack-r6gQdH2Z.js";import"./@babel-B_fy3T9z.js";import"./scheduler-C323NY8X.js";import"./clsx-B-dksMZM.js";import"./react-transition-group-CV_99lxT.js";import"./@emotion-uyX7IWDR.js";import"./hoist-non-react-statics-C-Qo8PK8.js";import"./stylis-DDa9OTMq.js";import"./@popperjs-CMBiYTiD.js";import"./@remix-run-B5iXO-M-.js";import"./prop-types-Chjiymov.js";import"./qr.js-D7uXRtkb.js";import"./peerjs-js-binarypack-0qb93TeF.js";import"./webrtc-adapter-DzGuYBkV.js";import"./sdp-C8-99_ry.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))m(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&m(p)}).observe(document,{childList:!0,subtree:!0});function s(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function m(o){if(o.ep)return;o.ep=!0;const u=s(o);fetch(o.href,u)}})();const P=t=>(r,s,m)=>t((...o)=>{console.log("  applying",o),r(...o),console.log("  new state",s())},s,m),G={open:!1,message:null,anchorOrigin:{vertical:"top",horizontal:"center"},autoHideDuration:3e3,status:null},H=O(P((t,r)=>({...G,setSnackMsg:s=>t({...s,open:!0}),closeSnackbar:()=>t(G)})));function ke(t){return e.jsx(fe,{...t,direction:"down"})}function Re(t){const{snackbar:r,closeSnackbar:s,message:m,open:o,anchorOrigin:u,autoHideDuration:p,status:n}=H(h=>h),d=e.jsx(ue.Fragment,{children:e.jsx($,{color:"inherit",size:"small",onClick:s,children:"確認"})}),c=h=>{switch(h){case 401:return"沒有權限！";case 500:return"API發生未知錯誤！"}};return e.jsx(pe,{open:o,onClose:s,anchorOrigin:u,TransitionComponent:ke,autoHideDuration:p,children:e.jsx("div",{className:"rainbow",children:e.jsx("div",{className:"rainbow-container",children:e.jsx(he,{message:n!=null?c(n):m,action:d})})})})}const Be={mid:null,name:"訪客",account:null,email:null,sso:null,lastLoginDT:null,isLogin:null,refetch:null};O(P((t,r)=>({...Be,setAccount:s=>t({...s,isLogin:!((s==null?void 0:s.mid)==0||!(s!=null&&s.mid))})})));const V={open:!1,title:"",content:"",handleAgree:()=>{},handleDisagree:()=>{}},Fe=O(P((t,r)=>({...V,setAlert:s=>t({...V,...s,open:!0}),closeAlert:()=>t({open:!1})}))),Te={isSidebarOpen:!0},Me=O(P((t,r)=>({...Te,setSidebarOpen:(s=null)=>t(m=>({isSidebarOpen:s!==null?s:!m.isSidebarOpen}))}))),X={open:!1,title:"",content:null,actions:null,body:null},He=O(P((t,r)=>({...X,setDialog:s=>t({...X,...s,open:!0}),closeDialog:()=>t({open:!1})})));function Ue(){const t=F();return e.jsxs("div",{className:"min-h-screen bg-[#0D1117] text-[#C9D1D9] flex flex-col items-center justify-center px-4",children:[e.jsx("h1",{className:"text-3xl font-semibold mb-8",children:"📸 WHL 圖片傳輸工具"}),e.jsx("button",{className:"w-full max-w-xs bg-[#238636] hover:bg-[#2EA043] text-white py-3 rounded-lg mb-4 transition",onClick:()=>t("/create"),children:"建立連線"}),e.jsx("button",{className:"w-full max-w-xs bg-[#161B22] hover:bg-[#30363D] text-[#C9D1D9] py-3 rounded-lg transition",onClick:()=>t("/join"),children:"加入連線"})]})}const D={SELECTED:"selected",SENDING:"sending",SENT:"sent",FAILED:"failed",RECEIVED:"received",DOWNLOADED:"downloaded"},ce=le(!1);function We({roomId:t,isHost:r}){const[s,m]=j.useState(null),[o,u]=M(ce),p=j.useRef(null),[n,d]=j.useState([]),[c,h]=j.useState([]),f=j.useRef({});j.useEffect(()=>{let l;if(t)return r?(l=new K(t),console.log(`Host attempting to open Peer with ID: ${t}`)):(l=new K(void 0),console.log("Joiner attempting to open Peer with a random ID")),m(l),()=>{l&&!(l!=null&&l.destroyed)&&(console.log("Destroying peer instance:",l.id),l.destroy()),m(null),d([]),h([])}},[t,r]),j.useEffect(()=>{if(!s)return;s.removeAllListeners();const l=i=>console.error("PeerJS error:",i);s.on("error",l);const x=i=>{p.current=i,i.on("open",()=>{u(!0),console.log(`DataConnection open with ${i.peer}`)}),i.on("close",()=>{u(!1),p.current=null,console.log(`DataConnection closed with ${i.peer}`)}),i.on("error",a=>{console.error(`DataConnection error with ${i.peer}:`,a),u(!1)}),i.on("data",a=>{if(r)a.type==="file-received-ack"?(console.log(`Host: ACK for file ${a.fileId}`),d(g=>g.map(N=>N.id===a.fileId?{...N,status:D.SENT}:N))):a.type==="file-receive-error"&&(console.error(`Host: Joiner reported error for file ${a.fileId}: ${a.error}`),d(g=>g.map(N=>N.id===a.fileId?{...N,status:D.FAILED}:N)));else if(console.log("blob in",a),a.type==="file-metadata")console.log("Joiner: Received file metadata",a),f.current[a.fileId]=a;else if(a instanceof Blob||a instanceof ArrayBuffer||a instanceof Uint8Array){let g=null;const N=Object.keys(f.current).filter(C=>!c.some(k=>k.id===C));if(N.length>0){const C=N[N.length-1];C&&f.current[C]&&(g=f.current[C])}if(g){const{fileId:C,name:k,mimeType:U,size:ae}=g;console.log(`Joiner: Received blob for ${k} (ID: ${C})`);const W=a instanceof Blob?a:new Blob([a],{type:U}),me=URL.createObjectURL(W);h(de=>[...de,{id:C,name:k,type:U,size:ae,blobUrl:me,blobObject:W,status:D.RECEIVED}]),i.send({type:"file-received-ack",fileId:C}),delete f.current[C]}else console.warn("Joiner: Received blob/arraybuffer without matching metadata or ID.")}else a.type==="batch-meta"&&console.log("Joiner: Received batch metadata",a)})};r?(s.on("open",i=>console.log(`Host Peer opened: ${i}`)),s.on("connection",x)):s.on("open",i=>{if(console.log(`Joiner Peer opened: ${i}`),t){const a=s.connect(t);x(a)}})},[s,t,r,c]);const y=l=>{const x=Array.from(l.target.files).map(i=>({id:ie(),name:i.name,size:i.size,type:i.type,previewUrl:URL.createObjectURL(i),status:D.SELECTED,fileObject:i}));d(i=>[...i,...x]),l.target.value=null},b=async()=>{if(!o||!p.current){alert("連線未建立!");return}const l=n.filter(x=>x.status===D.SELECTED);if(l.length===0){alert("沒有已選擇的檔案可傳送。");return}p.current.send({type:"batch-meta",totalFiles:l.length});for(const x of l){d(i=>i.map(a=>a.id===x.id?{...a,status:D.SENDING}:a));try{const i={type:"file-metadata",fileId:x.id,name:x.name,mimeType:x.type,size:x.size};p.current.send(i)}catch(i){console.error(`Host: Error sending file ${x.name}:`,i),d(a=>a.map(g=>g.id===x.id?{...g,status:D.FAILED}:g))}}for(const x of l)try{await new Promise(i=>setTimeout(i,50)),p.current.send(x.fileObject),console.log(`Host: Sent ${x.name} (ID: ${x.id})`)}catch(i){console.error(`Host: Error sending file ${x.name}:`,i),d(a=>a.map(g=>g.id===x.id?{...g,status:D.FAILED}:g))}},v=l=>{const x=c.find(i=>i.id===l);if(x){const i=document.createElement("a");i.href=x.blobUrl,i.download=x.name,document.body.appendChild(i),i.click(),document.body.removeChild(i),h(a=>a.map(g=>g.id===l?{...g,status:D.DOWNLOADED}:g))}},w=l=>{const x=n.filter(i=>i.id!==l);d(x)},E=(l,x=null)=>{switch(l){case D.SELECTED:return e.jsxs(e.Fragment,{children:[e.jsx(I,{title:"已選擇",children:e.jsx(ye,{color:"action"})}),e.jsx(I,{title:"刪除",children:e.jsx(T,{sx:{ml:1},onClick:()=>w(x),children:e.jsx(we,{color:"action"})})})]});case D.SENDING:return e.jsx(I,{title:"傳送中",children:e.jsx(De,{color:"primary",className:"animate-spin"})});case D.SENT:return e.jsx(I,{title:"已傳送",children:e.jsx(Q,{color:"success"})});case D.FAILED:return e.jsx(I,{title:"失敗",children:e.jsx(be,{color:"error"})});default:return null}};return e.jsx("div",{children:e.jsx(oe,{children:e.jsx(A,{path:"/transfer",element:e.jsxs(ge,{elevation:3,className:"p-4 md:p-6 max-w-2xl mx-auto my-4",children:[e.jsxs(S,{variant:"h5",component:"h2",gutterBottom:!0,className:"text-center text-indigo-600",children:["WHL's 檔案傳輸 (",r?"Host":"Joiner",")"]}),e.jsxs("div",{className:"mb-4 space-y-2",children:[e.jsxs(S,{children:["Peer ID: ",e.jsx("span",{className:"font-mono bg-gray-100 p-1 rounded",children:(s==null?void 0:s.id)||"..."})]}),r&&e.jsxs(S,{children:["房號: ",e.jsx("span",{className:"font-mono bg-gray-100 p-1 rounded",children:t})]}),e.jsxs(S,{children:["連線狀態:",e.jsx("span",{className:`ml-2 px-2 py-1 text-xs rounded-full text-white ${o?"bg-green-500":"bg-red-500"}`,children:o?"已連線":"未連線"})]})]}),r&&e.jsxs("div",{className:"mt-6 border-t pt-4",children:[e.jsx(S,{variant:"h6",gutterBottom:!0,children:"傳送檔案"}),e.jsxs("div",{className:"mb-4",children:[e.jsxs($,{variant:"outlined",component:"label",disabled:!o,children:["選擇檔案",e.jsx("input",{type:"file",hidden:!0,multiple:!0,onChange:y})]}),e.jsx($,{variant:"contained",color:"primary",onClick:b,disabled:!o||!n.some(l=>l.status===D.SELECTED),sx:{ml:2},className:"ml-2",children:"傳送已選擇的"})]}),n.length>0&&e.jsx(J,{dense:!0,children:n.map(l=>e.jsxs(z,{divider:!0,className:"hover:bg-gray-50",children:[e.jsx("img",{src:l.previewUrl,alt:l.name,className:"w-12 h-12 object-cover mr-3 rounded"}),e.jsx(_,{primary:e.jsx("span",{className:"font-medium",children:l.name}),secondary:`${(l.size/1024).toFixed(1)} KB - 狀態: ${l.status}`}),e.jsx("div",{className:"ml-auto",children:E(l.status,l.id)})]},l.id))})]}),!r&&e.jsxs("div",{className:"mt-6 border-t pt-4",children:[e.jsx(S,{variant:"h6",gutterBottom:!0,children:"接收到的檔案"}),c.length===0&&o&&e.jsx(S,{variant:"body2",color:"textSecondary",children:"等待接收檔案中..."}),c.length===0&&!o&&e.jsx(S,{variant:"body2",color:"textSecondary",children:"請先連線至 Host。"}),c.length>0&&e.jsx(J,{dense:!0,children:c.map(l=>e.jsxs(z,{divider:!0,className:"hover:bg-gray-50",children:[e.jsx("img",{src:l.blobUrl,alt:l.name,className:"w-12 h-12 object-cover mr-3 rounded"}),e.jsx(_,{primary:e.jsx("span",{className:"font-medium",children:l.name}),secondary:`${(l.size/1024).toFixed(1)} KB`}),e.jsx(I,{title:"下載檔案",children:e.jsx(T,{color:"primary",onClick:()=>v(l.id),disabled:l.status===D.DOWNLOADED,children:e.jsx(je,{})})}),l.status===D.DOWNLOADED&&e.jsx(I,{title:"已下載",children:e.jsx(Q,{color:"success",className:"ml-2"})})]},l.id))})]})]})})})})}function Je(){const[t,r]=se(),s=t.get("roomId"),m=F(),[o,u]=j.useState(""),{setSnackMsg:p}=H(),[n,d]=M(ce);j.useEffect(()=>{const f=ie().slice(0,13);r({roomId:f,isHost:!0});const y=window.location.origin;u(`${y}/join/${f}`)},[]),j.useEffect(()=>{n&&m(`/transfer?roomId=${s}&isHost=true`)},[n]);const c=()=>{o&&navigator.clipboard.writeText(o).then(()=>{p({message:"已複製加入連結到剪貼簿！"})})},h=()=>{m("/")};return e.jsxs("div",{className:"min-h-screen bg-[#0D1117] text-[#C9D1D9] flex flex-col items-center justify-center px-4",children:[e.jsx("h2",{className:"text-2xl font-medium mb-6",children:"🆔 你的房間 ID"}),e.jsxs("div",{className:"bg-[#161B22] p-6 rounded-lg flex flex-col items-center",children:[e.jsx("p",{className:"text-xl font-mono mb-4",children:s}),o&&e.jsxs("div",{className:"w-full mb-4",children:[e.jsx("label",{className:"block text-sm text-[#8B949E] mb-1",children:"加入連結"}),e.jsxs("div",{className:"flex items-center bg-[#0D1117] rounded-lg overflow-hidden",children:[e.jsx("input",{type:"text",readOnly:!0,value:o,className:"flex-1 px-3 py-2 bg-transparent text-[#C9D1D9] font-mono focus:outline-none"}),e.jsx("button",{onClick:c,className:"px-3 py-2 bg-[#238636] hover:bg-[#2EA043] text-white transition",children:"複製"})]})]}),o&&e.jsx("div",{className:"bg-white p-2 rounded-md mb-4",children:e.jsx(Ie,{value:o,size:128})}),e.jsx("p",{className:"text-sm text-[#8B949E]",children:"等待對方掃描或點選連結加入…⏳"})]}),e.jsx("button",{className:"mt-8 bg-[#161B22] hover:bg-[#30363D] text-[#C9D1D9] px-6 py-2 rounded-lg transition",onClick:h,children:"← 返回"})]})}function Y(){const t=F(),{roomId:r}=re(),[s,m]=j.useState("");j.useEffect(()=>{r&&t(`/transfer?roomId=${r}`)},[r,t]);const o=()=>{const p=s.trim();p.length!==0&&t(`/transfer?roomId=${p}`)},u=()=>{t("/")};return r?e.jsx("div",{className:"min-h-screen bg-[#0D1117] text-[#C9D1D9] flex items-center justify-center",children:e.jsx("p",{className:"text-lg",children:"自動導向中…"})}):e.jsxs("div",{className:"min-h-screen bg-[#0D1117] text-[#C9D1D9] flex flex-col items-center justify-center px-4",children:[e.jsx("h2",{className:"text-2xl font-medium mb-6",children:"🔗 加入房間"}),e.jsxs("div",{className:"w-full max-w-xs",children:[e.jsx("label",{className:"block text-[#8B949E] mb-2",htmlFor:"roomId",children:"房間 ID"}),e.jsx("input",{id:"roomId",type:"text",value:s,onChange:p=>m(p.target.value),className:"w-full px-4 py-2 bg-[#161B22] text-[#C9D1D9] rounded-lg focus:outline-none focus:ring-2 focus:ring-[#238636] mb-4",placeholder:"輸入房間 ID..."}),e.jsx("button",{className:"w-full bg-[#238636] hover:bg-[#2EA043] text-white py-3 rounded-lg transition mb-4",onClick:o,children:"加入"}),e.jsx("button",{className:"w-full bg-[#161B22] hover:bg-[#30363D] text-[#C9D1D9] py-3 rounded-lg transition",onClick:u,children:"← 返回"})]})]})}function ze(){var o;const{roomId:t}=re(),r=Se(),s=F();(o=r.state)==null||o.isHost;const m=()=>{s("/")};return e.jsx("div",{className:"bg-[#0D1117] text-[#C9D1D9] flex flex-col items-center px-4 py-6",children:e.jsx("button",{className:"mt-auto bg-[#161B22] hover:bg-[#30363D] text-[#C9D1D9] px-6 py-2 rounded-lg transition",onClick:m,children:"← 離開房間"})})}function _e(){const[t,r]=se(),s=t.get("roomId"),m=t.get("isHost");return e.jsxs(L,{sx:{flex:"1 1 auto"},children:[e.jsx(We,{roomId:s,isHost:m}),e.jsxs(oe,{children:[e.jsx(A,{path:"/",element:e.jsx(Ue,{})}),e.jsx(A,{path:"/create",element:e.jsx(Je,{})}),e.jsx(A,{path:"/join/:roomId",element:e.jsx(Y,{})}),e.jsx(A,{path:"/join",element:e.jsx(Y,{})}),e.jsx(A,{path:"/transfer",element:e.jsx(ze,{})})]})]})}function Qe(t){const{title:r}=t;return e.jsx("footer",{children:e.jsx("div",{className:"footer-content footer-info flex aic",children:e.jsx("div",{className:"flex rowTitle",children:"© 2025 WHL. All rights reserved."})})})}function Ke(){return R("(min-width:900px)"),e.jsx(L,{sx:{display:"flex",height:"100%",width:"100%"},children:e.jsxs(L,{component:"main",sx:{flexGrow:1,p:0,display:"flex",flexDirection:"column"},children:[e.jsx(_e,{}),e.jsx(Qe,{title:null})]})})}function Ge(){const{open:t,closeAlert:r,title:s,content:m,handleAgree:o,handleDisagree:u}=Fe(p=>p);return e.jsxs(q,{open:t,onClose:r,children:[e.jsx(ee,{children:s}),e.jsx(ne,{children:e.jsx(ve,{sx:{whiteSpace:"pre-line"},children:m})}),e.jsxs(te,{children:[e.jsx($,{onClick:r,children:"取消"}),e.jsx($,{onClick:()=>o(r),autoFocus:!0,children:"確認"})]})]})}function Ve(t){var w;const{children:r,margin:s=15,sx:m={},content_sx:o={},data:u=null,onlyProps:p=!1,noDrawer:n=!1}=t,d=((w=Me())==null?void 0:w.isDrawerOpen)&&!n,c=R(d?"(min-width:1440px)":"(min-width:1200px)"),h=R(d?"(min-width:1232px)":"(min-width:992px)"),f=R(d?"(min-width:1008px)":"(min-width:768px)");let y=c?"1170px":h?"970px":f?"750px":"100%",b=(u==null?void 0:u.length)<3?`${100/u.length}%`:c?1170/3:h?970/3:f?750/2:y;const v={content_width:y,margin:`${s}px`,width:b,width_margin:typeof b!="string"?b-s*2:`calc(${b} - ${s*2}px)`,lg:c,md:h,xs:f};return p==!0?e.jsx(j.Fragment,{children:j.cloneElement(r,{...v})}):e.jsx(L,{className:"flex flex-1-1 jcsb flex-col aic",sx:{...m},children:e.jsx(L,{sx:{width:y,display:"flex",flexWrap:"wrap",...o},children:j.cloneElement(r,{...v})})})}const Xe=Ne(q)(({theme:t})=>({"& .MuiDialogContent-root":{padding:t.spacing(2)},"& .MuiDialogActions-root":{padding:t.spacing(1)}}));function Ye(t){const{isRwdWidth:r}=t;return r?e.jsx(Ve,{onlyProps:!0,noDrawer:!0,children:e.jsx(Z,{...t})}):e.jsx(Z,{...t})}const Z=t=>{const{content_width:r,open:s,title:m,content:o,actions:u,body:p,closeDialog:n,disableScrollLock:d,fullWidth:c,fullHeight:h,maxWidth:f,fullScreen:y,isRwdWidth:b,contentProps:v={}}=t,w=b?{sx:{width:"100%",maxWidth:`${r} !important`,height:h?"100%":"auto"}}:{fullWidth:c,maxWidth:f,fullScreen:y};return e.jsxs(Xe,{onClose:n,open:s,disableScrollLock:!!d,...b?{}:w,PaperProps:{...b?w:{}},children:[e.jsxs(L,{className:"flex aic jcsb",sx:{p:1},children:[e.jsx(ee,{sx:{m:0,p:0,pl:1},children:m}),e.jsx(T,{onClick:n,sx:{color:E=>E.palette.grey[500]},children:e.jsx(Ce,{})})]}),p?j.cloneElement(p,{closeDialog:n}):e.jsxs(e.Fragment,{children:[e.jsx(ne,{dividers:!0,sx:{...v},children:!!o&&j.cloneElement(o,{closeDialog:n})}),!!u&&e.jsx(te,{children:j.cloneElement(u,{closeDialog:n})})]})]})},Ze=()=>{const{...t}=He();return e.jsxs(e.Fragment,{children:[e.jsx(Ke,{}),e.jsx(Ge,{}),e.jsx(Re,{}),e.jsx(Ye,{...t})]})},qe={},B=le(qe,async(t,r,s)=>{let m=t(B);r(B,{...m,...s})}),en=()=>{const[{...t},r]=M(B),s=({key:m,body:o})=>{console.log(`apiDataAtom log (${m}):`,{...t,[m]:o}),r({[m]:o})};return{...Ae(B),setApiData:s}};var nn={};const tn=()=>{const{setSnackMsg:t}=H(n=>n),{setApiData:r}=en(),s=(n=[])=>{let d="";n==null||n.map((c,h)=>{d+=(h==0?"":`

`)+((c==null?void 0:c.displayName)||(c==null?void 0:c.field))+`：
`+(c==null?void 0:c.error)}),setAlert({title:"錯誤",content:d,handleAgree:c=>c()})},m=(n,d,c)=>{console.log("onError",n,d),t({message:"API發生未知錯誤"})},o=async(n,d)=>{var h,f,y,b,v,w,E,l,x,i,a;((f=(h=d==null?void 0:d.queryKey)==null?void 0:h[0])==null?void 0:f[0])=="_"&&r({key:(b=(y=d==null?void 0:d.queryKey)==null?void 0:y[0])==null?void 0:b.replace("_",""),body:{data:n==null?void 0:n.body,refetch:(v=d==null?void 0:d.options)==null?void 0:v.queryFn}});const c=((w=n==null?void 0:n.body)==null?void 0:w.status)!==null&&((E=n==null?void 0:n.body)==null?void 0:E.status)!==void 0?(l=n==null?void 0:n.body)==null?void 0:l.status:null;c!==null&&Array.isArray((x=n==null?void 0:n.body)==null?void 0:x.errorArray)?s((i=n==null?void 0:n.body)==null?void 0:i.errorArray):c!==null&&t({message:(a=n==null?void 0:n.body)==null?void 0:a.message}),!(n!=null&&n.ok)&&c==null&&!(n!=null&&n.pages)&&t({message:"API發生未知錯誤！"})},u=(n,d)=>{},p=new Le({queryCache:new Oe({onSuccess:o,onError:m,onSettled:u}),mutationCache:new $e({onSuccess:o,onError:m}),defaultOptions:{queries:{refetchOnWindowFocus:!1,select:n=>{var h,f,y,b;let c=(((h=n==null?void 0:n.body)==null?void 0:h.status)!==null&&((f=n==null?void 0:n.body)==null?void 0:f.status)!==void 0?(y=n==null?void 0:n.body)==null?void 0:y.status:null)==null&&n.body||null;if(Array.isArray(n==null?void 0:n.pages)){let v=[];(b=n==null?void 0:n.pages)==null||b.map((w,E)=>{v[E]=(w==null?void 0:w.body)||w}),c={...n,pages:v}}return c}}}});return e.jsx(Pe,{client:p,children:e.jsx(Ee,{basename:nn.PUBLIC_URL,children:e.jsx(Ze,{})})})},sn=document.getElementById("root");xe.createRoot(sn).render(e.jsx(tn,{}));
